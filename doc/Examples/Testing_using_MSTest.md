<!-- This file was auto-generated by SweetDoky -->
# Testing using MSTest 

<a name="BasicAssertions"></a>
## Basic assertions 

```csharp
// Arrange
var fixture = Fixture.ShoppingBasket(config =>
{
    config.stockHandler
        .IsBookInStock(true)
        .TryGetLease(returns: Task.FromResult(true), out_bookLease : new("", Guid.NewGuid(), TimeSpan.FromHours(1)));
    config.user.Id(Guid.NewGuid());
    config.repo.AddBook();
});
var sut = fixture.CreateShoppingBasket();

// Act
await sut.Add("isbn 0-434-00348-4");

// Assert
var calls = fixture.Calls;

Assert.HasCount(1, calls.repo.AddBook(arguments => arguments.isbn == "isbn 0-434-00348-4"));

var logs = calls.logger.Log(t => t.logLevel == LogLevel.Warning).ToList();

Assert.HasCount(1, logs, "Expected exactly one warning log.");
var actual = logs.First();
Assert.AreEqual("Book isbn 0-434-00348-4 not in stock", actual.message);
```

<a name="DumpFixtureCallsToOutput"></a>
## Dump fixture calls to output 

```csharp
// Arrange
var fixture = Fixture.ShoppingBasket(setupFixture);
var sut = fixture.CreateShoppingBasket();

// Act
await sut.Add("isbn 0-434-00348-4");

// Dump all calls made towards the fixture mocks
foreach (var call in fixture.Calls.All())
{
    testContext.WriteLine(call.ToString());
}

// Dump calls specifically made towards the repo dependency
foreach (var call in fixture.Calls.repo.All())
{
    testContext.WriteLine(call.ToString());
}
```

